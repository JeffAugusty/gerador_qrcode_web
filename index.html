<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Gerador QR Code - TI</title>

    <link rel="icon" href="logo-ti.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="logo-ti.png">
    <link rel="shortcut icon" href="logo-ti.png" type="image/png">

    <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="estilos.css">
</head>
<body>
    <main>
        <div class="container">
            <div class="logo-container">
                <img src="logo-ti.svg" alt="Logo Tecnologia da Informação" class="logo">
            </div>
            <h2>Gerador de QR Code</h2>

            <div class="section">
                <h4>Gerar para URL</h4>
                <input type="text" id="urlInput" placeholder="https://seusite.com.br">
                <button onclick="gerarUrl()">Gerar QR Code</button>
            </div>

            <div class="section">
                <h4>Gerar para Wi-Fi</h4>
                <input type="text" id="ssid" placeholder="Nome da Rede (SSID)">
                <input type="text" id="senha" placeholder="Senha da Rede">
                <button onclick="gerarWifi()">Gerar QR Code</button>
            </div>

            <div id="qrcode-container">
                <div id="qrcode"></div>
                
                <div class="settings-section">
                    <label for="quality-select">Qualidade do Download:</label>
                    <select id="quality-select" name="quality">
                        <option value="300">Boa (300x300 px)</option>
                        <option value="600" selected>Ótima (600x600 px)</option>
                        <option value="1200">Excelente (1200x1200 px)</option>
                    </select>
                </div>

                <button id="download-btn" class="btn-download">Baixar PNG</button>
            </div>
        </div>
    </main>

    <footer>
        <p>Desenvolvido por DP Tecnologia da Informação <br>
        © 2025 | Facmais Ituiutaba | todos os direitos reservados</p>
    </footer>

    <script>
        var qrcodeContainer = document.getElementById("qrcode-container");
        var qrcodeElement = document.getElementById("qrcode");
        var downloadBtn = document.getElementById("download-btn");

        function gerarUrl() {
            var url = document.getElementById("urlInput").value.trim();
            if (url) {
                gerarCodigo(url);
                mostrarResultado();
            } else {
                alert("Por favor, digite uma URL!");
            }
        }
        function gerarWifi() {
            var ssid = document.getElementById("ssid").value.trim();
            var senha = document.getElementById("senha").value.trim();
            if (ssid) {
                var wifiString = `WIFI:S:${ssid};T:WPA;P:${senha};;`;
                gerarCodigo(wifiString);
                mostrarResultado();
            } else {
                alert("Por favor, preencha pelo menos o nome da rede!");
            }
        }
        function gerarCodigo(texto) {
            var qualidade = document.getElementById("quality-select").value;
            qrcodeElement.innerHTML = "";
            new QRCode(qrcodeElement, {
                text: texto,
                width: parseInt(qualidade),
                height: parseInt(qualidade),
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
        }
        function mostrarResultado() {
            qrcodeContainer.style.display = 'flex';
            downloadBtn.style.display = 'inline-block';
        }
        downloadBtn.addEventListener('click', function() {
            var qrImage = document.querySelector('#qrcode img');
            if (qrImage) {
                var imgSrc = qrImage.src;
                var link = document.createElement('a');
                link.href = imgSrc;
                link.download = 'qrcode.png';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } else {
                alert("Não foi possível encontrar a imagem do QR Code para baixar.");
            }
        });
    </script>
</body>
</html>